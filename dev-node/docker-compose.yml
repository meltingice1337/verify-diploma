version: "3.8"
services:
    bch-node:
        container_name: vd-bch-node
        build: ./bch-node
        volumes: 
            - ./bch-node/bitcoin:/home/bitcoin
            - ./bch-node/data:/home/.data
    processor:
        container_name: vd-processor
        build: ./processor
        ports: 
            - 44523:44523
        volumes:
            - ./processor:/usr/src/processor
        depends_on:
            - mongo
            - bch-node
    mongo:
        container_name: vd-mongo
        image: mongo
    bitbox-rest:
        container_name: vd-bitbox-rest
        build: ./bitbox-rest
        environment: 
            - RPC_BASEURL=http://bch-node:8332
            - RPC_USERNAME=test
            - RPC_PASSWORD=test
            - ZEROMQ_URL=bch-node
            - ZEROMQ_PORT=3000
        ports: 
            - 3000:3000